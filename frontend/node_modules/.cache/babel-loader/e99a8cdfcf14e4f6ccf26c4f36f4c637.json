{"ast":null,"code":"import _toConsumableArray from\"/Users/onurkapucu/Downloads/Django-JSReact-Blog/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/onurkapucu/Downloads/Django-JSReact-Blog/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'./App.css';import ArticleList from'./components/ArticleList';import{useState,useEffect}from'react';import'bootstrap/dist/css/bootstrap.css';import NavBar from'./components/NavBar';import Form from'./components/Form';import{useNavigate}from'react-router-dom';import{useCookies}from'react-cookie';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),articles=_useState2[0],setArticles=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),editArticle=_useState4[0],setEditArticle=_useState4[1];var _useCookies=useCookies(['mytoken']),_useCookies2=_slicedToArray(_useCookies,3),token=_useCookies2[0],setToken=_useCookies2[1],removeToken=_useCookies2[2];var navigate=useNavigate();useEffect(function(){fetch('http://localhost:8000/api/articles/',{method:'GET',headers:{'Content-Type':'application/json','Authorization':'a2a76bcaca32becedbd9fc8542dc293f9c98b92b'}}).then(function(resp){return resp.json();}).then(function(resp){return setArticles(resp);}).catch(function(error){return console.log(error);});},[]);var editBtn=function editBtn(article){setEditArticle(article);};var updatedInformation=function updatedInformation(article){var new_article=articles.map(function(myarticle){if(myarticle.id===article.id){return article;}else{return myarticle;}});setArticles(new_article);};var articleForm=function articleForm(){setEditArticle({title:'',description:''});};var insertedInformation=function insertedInformation(article){var new_articles=[].concat(_toConsumableArray(articles),[article]);setArticles(new_articles);};var deleteBtn=function deleteBtn(article){var new_article=articles.filter(function(myarticle){if(myarticle.id===article.id){return false;}return true;});setArticles(new_article);};useEffect(function(){var user_token=token['mytoken'];console.log('User token is',user_token);if(String(user_token)==='undefined'){navigate('/');}else{navigate('/articles');}},[token]);var logoutBtn=function logoutBtn(){removeToken(['mytoken']);};return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[/*#__PURE__*/_jsx(NavBar,{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:articleForm,children:\"Create Post\"})})}),/*#__PURE__*/_jsx(ArticleList,{articles:articles,editBtn:editBtn,deleteBtn:deleteBtn}),/*#__PURE__*/_jsx(Form,{article:editArticle,updatedInformation:updatedInformation,insertedInformation:insertedInformation})]});}export default App;","map":{"version":3,"names":["ArticleList","useState","useEffect","NavBar","Form","useNavigate","useCookies","App","articles","setArticles","editArticle","setEditArticle","token","setToken","removeToken","navigate","fetch","method","headers","then","resp","json","catch","error","console","log","editBtn","article","updatedInformation","new_article","map","myarticle","id","articleForm","title","description","insertedInformation","new_articles","deleteBtn","filter","user_token","String","logoutBtn"],"sources":["/Users/onurkapucu/Downloads/Django-JSReact-Blog/frontend/src/App.js"],"sourcesContent":["import './App.css';\nimport ArticleList from './components/ArticleList';\nimport {useState,useEffect} from 'react';\nimport 'bootstrap/dist/css/bootstrap.css';\nimport NavBar from './components/NavBar';\nimport Form from './components/Form';\nimport {useNavigate} from 'react-router-dom'\nimport {useCookies} from 'react-cookie'\n\n\nfunction App() {\n  const [articles, setArticles] = useState([])\n  const [editArticle, setEditArticle] = useState('')\n  const [token, setToken, removeToken] = useCookies(['mytoken'])\n  let navigate = useNavigate()\n\n\n  useEffect(() =>{\n    fetch('http://localhost:8000/api/articles/', {\n      method:'GET',\n      headers:{\n        'Content-Type': 'application/json',\n        'Authorization': 'a2a76bcaca32becedbd9fc8542dc293f9c98b92b'\n      }\n    })\n    .then(resp => resp.json())\n    .then(resp => setArticles(resp))\n    .catch(error => console.log(error))\n\n  }, [])\n\n  const editBtn = (article) =>{\n    setEditArticle(article)\n  }\n\n  const updatedInformation = (article) => {\n    const new_article = articles.map(myarticle => {\n      if(myarticle.id === article.id){\n        return article\n      }else{\n        return myarticle\n      }\n    })\n    setArticles(new_article)\n  }\n\n  const articleForm = () =>{\n    setEditArticle({title:'', description:''})\n  }\n\n  const insertedInformation = (article) => {\n   const new_articles = [...articles,article]\n   setArticles(new_articles)\n  }\n\n  const deleteBtn = (article) =>{\n    const new_article = articles.filter(myarticle => {\n      if(myarticle.id === article.id){\n        return false\n      }\n      \n      return true\n    })\n    setArticles(new_article)\n  }\n\n\n  useEffect(()=> {\n    var user_token = token['mytoken']\n    console.log('User token is',user_token)\n    if(String(user_token) === 'undefined'){\n        navigate('/')\n    }else{\n      navigate('/articles')\n    }\n}, [token])\n\n\nconst logoutBtn = () => {\n  removeToken(['mytoken'])\n\n}\n \n\n\n  return (\n    <div className=\"App\">\n\n   <NavBar />\n   <br />\n\n   <div className=\"row\">\n     <div className=\"col\">\n       <button className=\"btn btn-primary\" onClick={articleForm}>Create Post</button>\n\n     </div>\n\n   </div>\n\n\n\n    <ArticleList articles={articles} editBtn ={editBtn}  deleteBtn ={deleteBtn}/>\n    <Form  article = {editArticle} updatedInformation= {updatedInformation} insertedInformation= {insertedInformation}/>\n  \n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
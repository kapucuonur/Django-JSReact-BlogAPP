{"ast":null,"code":"import _regeneratorRuntime from\"/Users/onurkapucu/Downloads/Django-JSReact-Blog/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/onurkapucu/Downloads/Django-JSReact-Blog/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/onurkapucu/Downloads/Django-JSReact-Blog/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{useCookies}from'react-cookie';import APIService from'./APIService';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useCookies=useCookies(['mytoken']),_useCookies2=_slicedToArray(_useCookies,2),token=_useCookies2[0],setToken=_useCookies2[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),isLogin=_useState6[0],setLogin=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),error=_useState8[0],setError=_useState8[1];var navigate=useNavigate();useEffect(function(){var userToken=token['mytoken'];console.log('Login User token is',userToken);console.log('Data type',typeof userToken);if(userToken&&userToken!=='undefined'){navigate('/articles');}else{navigate('/');}},[token,navigate]);var loginBtn=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(username.trim().length===0||password.trim().length===0)){_context.next=3;break;}setError('Username and password are required.');return _context.abrupt(\"return\");case 3:_context.prev=3;_context.next=6;return APIService.LoginUser({username:username,password:password});case 6:response=_context.sent;setToken('mytoken',response.token,{path:'/'});setError('');_context.next=15;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](3);console.error('Login error:',_context.t0);setError('Invalid username or password.');case 15:case\"end\":return _context.stop();}}},_callee,null,[[3,11]]);}));return function loginBtn(){return _ref.apply(this,arguments);};}();var registerBtn=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(username.trim().length===0||password.trim().length===0)){_context2.next=3;break;}setError('Username and password are required.');return _context2.abrupt(\"return\");case 3:_context2.prev=3;_context2.next=6;return APIService.RegisterUser({username:username,password:password});case 6:_context2.next=8;return loginBtn();case 8:// Automatically log in after registration\nsetError('');_context2.next=15;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](3);console.error('Registration error:',_context2.t0);setError('Registration failed. Please try again.');case 15:case\"end\":return _context2.stop();}}},_callee2,null,[[3,11]]);}));return function registerBtn(){return _ref2.apply(this,arguments);};}();var loginStyle={backgroundImage:\"url(\".concat(process.env.PUBLIC_URL+\"img/10.jpg\",\")\"),backgroundRepeat:'no-repeat',backgroundSize:'cover',minHeight:'100%',height:'77vh',backgroundPosition:'center',margin:0};return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"alert alert-danger\",children:\"Welcome to Blog\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-sm-4\",children:[isLogin?/*#__PURE__*/_jsx(\"h3\",{children:\"Please Login Here\"}):/*#__PURE__*/_jsx(\"h3\",{children:\"Please Register Here\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:\"Username\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:username,className:\"form-control\",placeholder:\"Enter Username\",onChange:function onChange(e){return setUsername(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,className:\"form-control\",placeholder:\"Enter Password\",onChange:function onChange(e){return setPassword(e.target.value);}})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{children:isLogin?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:loginBtn,className:\"btn btn-primary\",children:\"Login\"}),/*#__PURE__*/_jsx(\"p\",{children:\"If You Don't Have an Account, Please\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return setLogin(false);},className:\"btn btn-primary\",children:\"Register\"})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:registerBtn,className:\"btn btn-primary\",children:\"Register\"}),/*#__PURE__*/_jsx(\"p\",{children:\"If You Have an Account, Please\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:function onClick(){return setLogin(true);},children:\"Login\"})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-sm-8 full-img\",style:loginStyle})]})})});}export default Login;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","useCookies","APIService","Login","username","setUsername","password","setPassword","token","setToken","isLogin","setLogin","error","setError","navigate","userToken","console","log","loginBtn","trim","length","LoginUser","response","path","registerBtn","RegisterUser","loginStyle","backgroundImage","process","env","PUBLIC_URL","backgroundRepeat","backgroundSize","minHeight","height","backgroundPosition","margin","e","target","value"],"sources":["/Users/onurkapucu/Downloads/Django-JSReact-Blog/frontend/src/components/Login.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useCookies } from 'react-cookie';\nimport APIService from './APIService';\n\nfunction Login() {\n    const [username, setUsername] = useState('');\n    const [password, setPassword] = useState('');\n    const [token, setToken] = useCookies(['mytoken']);\n    const [isLogin, setLogin] = useState(true);\n    const [error, setError] = useState('');\n    let navigate = useNavigate();\n\n    useEffect(() => {\n        const userToken = token['mytoken'];\n        console.log('Login User token is', userToken);\n        console.log('Data type', typeof userToken);\n\n        if (userToken && userToken !== 'undefined') {\n            navigate('/articles');\n        } else {\n            navigate('/');\n        }\n    }, [token, navigate]);\n\n    const loginBtn = async () => {\n        if (username.trim().length === 0 || password.trim().length === 0) {\n            setError('Username and password are required.');\n            return;\n        }\n\n        try {\n            const response = await APIService.LoginUser({ username, password });\n            setToken('mytoken', response.token, { path: '/' });\n            setError('');\n        } catch (error) {\n            console.error('Login error:', error);\n            setError('Invalid username or password.');\n        }\n    };\n\n    const registerBtn = async () => {\n        if (username.trim().length === 0 || password.trim().length === 0) {\n            setError('Username and password are required.');\n            return;\n        }\n\n        try {\n            await APIService.RegisterUser({ username, password });\n            await loginBtn(); // Automatically log in after registration\n            setError('');\n        } catch (error) {\n            console.error('Registration error:', error);\n            setError('Registration failed. Please try again.');\n        }\n    };\n\n    const loginStyle = {\n        backgroundImage: `url(${process.env.PUBLIC_URL + \"img/10.jpg\"})`,\n        backgroundRepeat: 'no-repeat',\n        backgroundSize: 'cover',\n        minHeight: '100%',\n        height: '77vh',\n        backgroundPosition: 'center',\n        margin: 0,\n    };\n\n    return (\n        <div className=\"App\">\n            <div className=\"container-fluid\">\n                <div className=\"row\">\n                    <h1 className=\"alert alert-danger\">Welcome to Blog</h1>\n                    <br />\n                    <br />\n\n                    <div className=\"col-sm-4\">\n                        {isLogin ? <h3>Please Login Here</h3> : <h3>Please Register Here</h3>}\n                        {error && <div className=\"alert alert-danger\">{error}</div>}\n\n                        <div className=\"form-group\">\n                            <label htmlFor=\"username\">Username</label>\n                            <input\n                                type=\"text\"\n                                value={username}\n                                className=\"form-control\"\n                                placeholder=\"Enter Username\"\n                                onChange={(e) => setUsername(e.target.value)}\n                            />\n                        </div>\n\n                        <div className=\"form-group\">\n                            <label htmlFor=\"password\">Password</label>\n                            <input\n                                type=\"password\"\n                                value={password}\n                                className=\"form-control\"\n                                placeholder=\"Enter Password\"\n                                onChange={(e) => setPassword(e.target.value)}\n                            />\n                        </div>\n\n                        <br />\n\n                        <div>\n                            {isLogin ? (\n                                <div>\n                                    <button onClick={loginBtn} className=\"btn btn-primary\">Login</button>\n                                    <p>If You Don't Have an Account, Please</p>\n                                    <button onClick={() => setLogin(false)} className=\"btn btn-primary\">Register</button>\n                                </div>\n                            ) : (\n                                <div>\n                                    <button onClick={registerBtn} className=\"btn btn-primary\">Register</button>\n                                    <p>If You Have an Account, Please</p>\n                                    <button className=\"btn btn-primary\" onClick={() => setLogin(true)}>Login</button>\n                                </div>\n                            )}\n                        </div>\n                    </div>\n\n                    <div className=\"col-sm-8 full-img\" style={loginStyle}></div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module"}